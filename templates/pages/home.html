{% extends 'base.html' %}
{% block content %}
    <div class="px-4 py-12 sm:px-6 lg:px-8">
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li {% if message.tags %}class="{{ message.tags }}"{% endif %}>
                        {{ message }}
                        <button class="dismiss-btn" onclick="this.parentElement.remove()">x</button>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
        <h1 class="text-red-800 text-4xl pb-10">multi_link</h1>
        {% if user.is_authenticated %}
            <div class = "mb-10">
                <p>Username: {{ user.username }}</p>
                <p>Email: {{ user.email }}</p>
            </div>
            <div class="mb-6">
                <h2 class="text-xl">Links you've created:</h2>
                <ul class="list-inside">
                    {% for link in user.links.all %}
                        <li class="m-3">
                            <div class="inline-block w-52 overflow-hidden text-nowrap text-ellipsis">
                                <a href="{{ link.url }}">{{ link.title }}</a>
                            </div>
                            <button class="inline-block relative justify-center px-1 py-1 ml-2 text-xs font-medium text-white bg-red-800 border border-transparent border-solid rounded-md group hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2">
                                <a href="{% url 'link' link_id=link.uuid %}">View</a>
                            </button>
                        </li>
                    {% endfor %}
                </ul>
            </div>
            <button class="relative flex justify-center px-4 py-2 mb-2 mr-2 text-sm font-bold text-white bg-red-800 border border-transparent border-solid rounded-md group hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2">
                <a href="{% url 'new_link' %}">Save a new link</a>
            </button>
            <button class="relative flex justify-center px-4 py-2 mr-2 text-sm font-medium text-white bg-red-800 border border-transparent border-solid rounded-md group hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2">
                <a href="{% url 'account_logout' %}">Logout</a>
            </button>
        {% else %}
            <div class="flex">
                <button class="relative flex justify-center px-4 py-2 mr-2 text-sm font-medium text-white bg-red-800 border border-transparent border-solid rounded-md group hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2"
                        type="button">
                    <a href="{% url 'account_login' %}">Login</a>
                </button>
                <button class="relative flex justify-center px-4 py-2 mr-2 text-sm font-medium text-white bg-red-800 border border-transparent border-solid rounded-md group hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2">
                    <a href="{% url 'account_signup' %}">Signup</a>
                </button>
            </div>
        {% endif %}
    </div>
{% endblock content %}
